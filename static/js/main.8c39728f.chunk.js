(this["webpackJsonpanyway-kanban"]=this["webpackJsonpanyway-kanban"]||[]).push([[0],{33:function(t,e,n){},37:function(t,e,n){},38:function(t,e,n){},40:function(t,e,n){},41:function(t,e,n){},43:function(t,e,n){"use strict";n.r(e);var a=n(0),r=n.n(a),c=n(22),s=n.n(c),i=n(14),o=n(17),u=n(6),l=n.n(u),d=n(9),f=n(11),j=n(25),b=n(26),h=n(10),x=n(45),p=n(13),m=n(44),O=(n(33),n(1)),v=function(t){var e=t.text,n=t.info,a=t.children;return Object(O.jsxs)(p.a,{className:"kanban-card d-flex flex-row p-2 justify-content-between align-items-center",children:[Object(O.jsxs)("div",{className:"align-self-start",children:[Object(O.jsxs)("p",{className:"kanban-card__text d-flex align-items-center mb-2",children:[Object(O.jsx)(m.a,{className:"mr-2 flex-shrink-0"}),e]}),n&&Object(O.jsx)("p",{className:"kanban-card__info ml-4 my-0 text-muted",children:n})]}),a]})},k=function(t){var e=t.id,n=t.text,a=t.onStart;return Object(O.jsx)(v,{text:n,children:Object(O.jsx)(h.a,{variant:"primary",className:"m-2 mr-3",onClick:function(){return a(e)},children:"Start"})})},g=n(16),w=(n(37),function(t){var e=t.children;return Object(O.jsx)(g.a,{className:"px-0 mb-3",md:12,lg:4,children:Object(O.jsx)(p.a,{bg:"light",className:"column-content h-100",children:Object(O.jsx)(p.a.Body,{className:"p-2 d-flex flex-column",children:e})})})}),y=(n(38),function(t){var e=t.count,n=t.title;return Object(O.jsxs)("h6",{className:"kanban-column__title card-title d-flex align-items-center",children:[Object(O.jsx)("span",{className:"kanban-column__counter rounded-pill text-muted ml-1 mr-2",children:e}),n]})}),S=n(20),N=function(t){var e=t.onAdd,n=t.showCard,r=Object(a.useRef)(null);return Object(a.useEffect)((function(){var t;null===(t=r.current)||void 0===t||t.focus()}),[]),Object(O.jsx)(v,{children:Object(O.jsxs)(S.a,{className:"flex-grow-1 d-flex align-items-center",onSubmit:function(t){t.preventDefault(),r.current&&e(r.current.value),n(!1)},children:[Object(O.jsx)(S.a.Control,{type:"text",name:"task",placeholder:"Add a new task",ref:r}),Object(O.jsx)(h.a,{type:"submit",variant:"outline-primary",className:"m-2 mr-3",onClick:function(){return e},children:"Add"})]})})},_=(n(40),function(t){var e=t.list,n=t.onAdd,r=t.onStart,c=Object(a.useState)(!1),s=Object(f.a)(c,2),i=s[0],o=s[1];return Object(O.jsxs)(w,{children:[Object(O.jsx)(y,{count:e.length,title:"To do"}),e.map((function(t){return Object(O.jsx)(k,{id:t.id,text:t.task,onStart:r},"".concat(t.id).concat(t.task))})),i&&Object(O.jsx)(N,{onAdd:n,showCard:o}),Object(O.jsxs)(h.a,{variant:"outline-dark",className:"todo__new-task-button my-3 mx-auto pl-2 pr-3 d-flex align-items-center",onClick:function(){return o(!0)},children:[Object(O.jsx)(x.a,{className:"todo__plus-symbol",size:24}),Object(O.jsx)("span",{children:"New task"})]})]})}),D=function(t){var e=Math.floor(t/3600).toString(),n=Math.floor(t%3600/60).toString(),a=Math.floor(t%60).toString(),r=function(t){return 1===t.length?"0".concat(t):t};return e=r(e),n=r(n),a=r(a),"".concat(e,":").concat(n,":").concat(a)},E=function(t){var e=t.id,n=t.text,r=t.date,c=t.onFinish,s=Object(a.useState)(0),i=Object(f.a)(s,2),o=i[0],u=i[1];return Object(a.useEffect)((function(){!function(t){var e=new Date(t).getTime(),n=(Date.now()-e)/1e3;u(n)}(r);var t=window.setInterval((function(){u((function(t){return t+1}))}),1e3);return function(){window.clearInterval(t)}}),[r]),Object(O.jsx)(O.Fragment,{children:Object(O.jsx)(v,{text:n,info:D(o),children:Object(O.jsx)(h.a,{variant:"success",className:"m-2 mr-3",onClick:function(){return c(e)},children:"Resolve"})})})},A=function(t){var e=t.list,n=t.onFinish;return Object(O.jsxs)(w,{children:[Object(O.jsx)(y,{count:e.length,title:"In progress"}),e.map((function(t){return Object(O.jsx)(E,{id:t.id,text:t.task,date:t.date,onFinish:n},"".concat(t.id).concat(t.task))}))]})},C=function(t){var e=t.text,n=t.date,a=t.finished,r=new Date(n).getTime(),c=new Date(a).getTime(),s="$".concat((4.5*((c-r)/1e3/60/60)).toFixed(2));return Object(O.jsx)(v,{text:e,info:s})},T=function(t){var e=t.list;return Object(O.jsxs)(w,{children:[Object(O.jsx)(y,{count:e.length,title:"Done"}),e.map((function(t){return Object(O.jsx)(C,{id:t.id,text:t.task,date:t.date,finished:t.finished},"".concat(t.id).concat(t.task))}))]})},U=n(23),F=n(24),I={BASE_URL:"https://api.anyway.catlogic.ru",HEADERS:{"Content-Type":"application/json",Accept:"application/json"}},R="/kanban",J="/kanban/start",M="/kanban/finish",B=new(function(){function t(e){Object(U.a)(this,t),this.baseUrl=void 0,this.headers=void 0,this.baseUrl=e.baseUrl,this.headers=e.headers}return Object(F.a)(t,[{key:"getData",value:function(){var t=Object(d.a)(l.a.mark((function t(e){var n,a,r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(this.baseUrl).concat(e),{method:"GET",headers:this.headers});case 2:if(!(n=t.sent).ok){t.next=5;break}return t.abrupt("return",n.json());case 5:return t.next=7,n.json();case 7:throw a=t.sent,r=a.message,new Error(r);case 10:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"postData",value:function(){var t=Object(d.a)(l.a.mark((function t(e,n){var a,r,c,s,i;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=n.id,r=n.task,t.next=3,fetch("".concat(this.baseUrl).concat(e),{method:"POST",headers:this.headers,body:JSON.stringify({id:a,task:r})});case 3:if(!(c=t.sent).ok){t.next=6;break}return t.abrupt("return",c.json());case 6:return t.next=8,c.json();case 8:throw s=t.sent,i=s.message,new Error(i);case 11:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}()},{key:"patchData",value:function(){var t=Object(d.a)(l.a.mark((function t(e,n){var a,r,c,s,i,o;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=n.id,r=n.date,c=n.status,t.next=3,fetch("".concat(this.baseUrl).concat(e),{method:"PATCH",headers:this.headers,body:JSON.stringify({id:a,date:r,status:c})});case 3:if(!(s=t.sent).ok){t.next=6;break}return t.abrupt("return",s.json());case 6:return t.next=8,s.json();case 8:throw i=t.sent,o=i.message,new Error(o);case 11:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}()}]),t}())({baseUrl:I.BASE_URL,headers:I.HEADERS}),H=(n(41),function(){var t=Object(a.useState)([]),e=Object(f.a)(t,2),n=e[0],r=e[1],c=Object(a.useState)([]),s=Object(f.a)(c,2),u=s[0],h=s[1],x=Object(a.useState)([]),p=Object(f.a)(x,2),m=p[0],v=p[1],k=function(){var t=Object(d.a)(l.a.mark((function t(){var e;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,B.getData(R);case 3:e=t.sent,r(e.filter((function(t){return"todo"===t.status}))),h(e.filter((function(t){return"progress"===t.status}))),v(e.filter((function(t){return"done"===t.status}))),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),console.log(t.t0.message);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(){return t.apply(this,arguments)}}();Object(a.useEffect)((function(){k()}),[]);var g=function(){var t=Object(d.a)(l.a.mark((function t(e){var n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n="_".concat(Math.random().toString(36).substr(2,9)),t.prev=1,t.next=4,B.postData(R,{id:n,task:e});case 4:t.sent&&r((function(t){return[].concat(Object(o.a)(t),[{id:n,task:e}])})),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),console.log(t.t0.message);case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}(),w=function(){var t=Object(d.a)(l.a.mark((function t(e){var a,c;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=(new Date).toISOString(),t.prev=1,t.next=4,B.patchData(J,{id:e,date:a,status:"progress"});case 4:t.sent&&(c=n.find((function(t){return t.id===e})),r((function(t){return t.filter((function(t){return t.id!==e}))})),h((function(t){return[].concat(Object(o.a)(t),[Object(i.a)(Object(i.a)({},c),{},{date:a,status:"progress"})])}))),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),console.log(t.t0.message);case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}(),y=function(){var t=Object(d.a)(l.a.mark((function t(e){var n,a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=(new Date).toISOString(),t.prev=1,t.next=4,B.patchData(M,{id:e,date:n,status:"done"});case 4:t.sent&&(a=u.find((function(t){return t.id===e})),h((function(t){return t.filter((function(t){return t.id!==e}))})),v((function(t){return[].concat(Object(o.a)(t),[Object(i.a)(Object(i.a)({},a),{},{finished:n,status:"done"})])}))),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),console.log(t.t0.message);case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}();return Object(O.jsxs)(j.a,{fluid:"lg",className:"app pt-4 pb-1 min-vh-100 d-flex flex-column",children:[Object(O.jsx)("h5",{className:"app__header",children:"Anyway Labs Test Project"}),Object(O.jsx)("p",{className:"app__sub-header text-muted",children:"Just some good deeds"}),Object(O.jsxs)(b.a,{className:"d-flex flex-grow-1 px-1",children:[Object(O.jsx)(_,{list:n,onAdd:g,onStart:w}),Object(O.jsx)(A,{list:u,onFinish:y}),Object(O.jsx)(T,{list:m})]})]})});n(42);s.a.render(Object(O.jsx)(r.a.StrictMode,{children:Object(O.jsx)(H,{})}),document.getElementById("root"))}},[[43,1,2]]]);
//# sourceMappingURL=main.8c39728f.chunk.js.map